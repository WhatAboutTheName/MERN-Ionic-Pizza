{"ast":null,"code":"import { takeEvery, put, call } from 'redux-saga/effects';\nimport { axios } from '../../axios';\nimport { AUTONOTIFICATION } from '../action-types';\nimport { isAdmin, isLogin, userToken, userExpiresIn, userId } from '../actions/auth-actions';\nexport function* autonotificationWatcher() {\n  yield takeEvery(AUTONOTIFICATION, autonotificationWorker);\n}\n\nasync function autonotificationResp({\n  payload: {\n    auth\n  }\n}) {\n  const res = await axios.post('/auth/login', {\n    email: auth.email,\n    password: auth.password\n  });\n  return res;\n}\n\nfunction* autonotificationWorker() {\n  try {\n    const res = yield call(autonotificationResp);\n    put(isAdmin(res.data.admin));\n    put(isLogin(res.data.isLogin));\n    put(userToken(res.data.token));\n    put(userExpiresIn(res.data.expiresIn));\n    put(userId(res.data.userId));\n  } catch (e) {\n    throw e;\n  }\n} // export const logoutMethod = (Id: string) => async (dispatch: any) => {\n//     dispatch( isAdmin(false) );\n//     dispatch( isLogin(false) );\n//     dispatch( userToken('') );\n//     dispatch( userExpiresIn('0') );\n//     dispatch( userId('') );\n//     localStorage.removeItem('isLogin');\n//     localStorage.removeItem('token');\n//     localStorage.removeItem('expiresIn');\n//     await axios.put('/auth/logout', {userId: Id});\n// }","map":{"version":3,"sources":["D:/проекты/React/Ionic-pizza/client/src/store/sagas/auth.ts"],"names":["takeEvery","put","call","axios","AUTONOTIFICATION","isAdmin","isLogin","userToken","userExpiresIn","userId","autonotificationWatcher","autonotificationWorker","autonotificationResp","payload","auth","res","post","email","password","data","admin","token","expiresIn","e"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,GAApB,EAAyBC,IAAzB,QAAqC,oBAArC;AACA,SAASC,KAAT,QAAsB,aAAtB;AACA,SAASC,gBAAT,QAAiC,iBAAjC;AACA,SAASC,OAAT,EAAkBC,OAAlB,EAA2BC,SAA3B,EAAsCC,aAAtC,EAAqDC,MAArD,QAAmE,yBAAnE;AAEA,OAAO,UAAUC,uBAAV,GAAoC;AACvC,QAAMV,SAAS,CAACI,gBAAD,EAAmBO,sBAAnB,CAAf;AACH;;AAGD,eAAeC,oBAAf,CAAqC;AAAEC,EAAAA,OAAO,EAAE;AAAEC,IAAAA;AAAF;AAAX,CAArC,EAAgE;AAC5D,QAAMC,GAAG,GAAG,MAAMZ,KAAK,CAACa,IAAN,CAAW,aAAX,EAA0B;AAACC,IAAAA,KAAK,EAAEH,IAAI,CAACG,KAAb;AAAoBC,IAAAA,QAAQ,EAAEJ,IAAI,CAACI;AAAnC,GAA1B,CAAlB;AACA,SAAOH,GAAP;AACH;;AAED,UAAUJ,sBAAV,GAAmC;AAC/B,MAAI;AACA,UAAMI,GAAG,GAAG,MAAMb,IAAI,CAACU,oBAAD,CAAtB;AACAX,IAAAA,GAAG,CAACI,OAAO,CAACU,GAAG,CAACI,IAAJ,CAASC,KAAV,CAAR,CAAH;AACAnB,IAAAA,GAAG,CAACK,OAAO,CAACS,GAAG,CAACI,IAAJ,CAASb,OAAV,CAAR,CAAH;AACAL,IAAAA,GAAG,CAACM,SAAS,CAACQ,GAAG,CAACI,IAAJ,CAASE,KAAV,CAAV,CAAH;AACApB,IAAAA,GAAG,CAACO,aAAa,CAACO,GAAG,CAACI,IAAJ,CAASG,SAAV,CAAd,CAAH;AACArB,IAAAA,GAAG,CAACQ,MAAM,CAACM,GAAG,CAACI,IAAJ,CAASV,MAAV,CAAP,CAAH;AACH,GAPD,CAOE,OAAMc,CAAN,EAAS;AACP,UAAMA,CAAN;AACH;AACJ,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { takeEvery, put, call } from 'redux-saga/effects';\r\nimport { axios } from '../../axios';\r\nimport { AUTONOTIFICATION } from '../action-types';\r\nimport { isAdmin, isLogin, userToken, userExpiresIn, userId } from '../actions/auth-actions';\r\n\r\nexport function* autonotificationWatcher() {\r\n    yield takeEvery(AUTONOTIFICATION, autonotificationWorker);\r\n}\r\n\r\n\r\nasync function autonotificationResp ({ payload: { auth }}: any) {\r\n    const res = await axios.post('/auth/login', {email: auth.email, password: auth.password});\r\n    return res;\r\n}\r\n\r\nfunction* autonotificationWorker() {\r\n    try {\r\n        const res = yield call(autonotificationResp as any);\r\n        put(isAdmin(res.data.admin));\r\n        put(isLogin(res.data.isLogin));\r\n        put(userToken(res.data.token));\r\n        put(userExpiresIn(res.data.expiresIn));\r\n        put(userId(res.data.userId));\r\n    } catch(e) {\r\n        throw e;\r\n    }\r\n}\r\n\r\n// export const logoutMethod = (Id: string) => async (dispatch: any) => {\r\n//     dispatch( isAdmin(false) );\r\n//     dispatch( isLogin(false) );\r\n//     dispatch( userToken('') );\r\n//     dispatch( userExpiresIn('0') );\r\n//     dispatch( userId('') );\r\n//     localStorage.removeItem('isLogin');\r\n//     localStorage.removeItem('token');\r\n//     localStorage.removeItem('expiresIn');\r\n//     await axios.put('/auth/logout', {userId: Id});\r\n// }"]},"metadata":{},"sourceType":"module"}