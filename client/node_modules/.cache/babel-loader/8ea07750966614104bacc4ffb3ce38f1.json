{"ast":null,"code":"import Axios from 'axios';\nimport { useSelector } from 'react-redux';\nexport const axios = Axios.create({\n  baseURL: \"http://localhost:5000\",\n  responseType: \"json\"\n});\n\nconst setAuthToken = async () => {\n  const token = useSelector(state => state.auth.token);\n\n  try {\n    if (token) {\n      axios.defaults.headers.common['Authorization'] = {\n        Authorization: `Bearer ${token}`\n      };\n    } else {\n      delete axios.defaults.headers.common['Authorization'];\n    }\n  } catch (e) {\n    throw e;\n  }\n};\n\nsetAuthToken();","map":{"version":3,"sources":["D:/проекты/React/Ionic-pizza/client/src/axios.ts"],"names":["Axios","useSelector","axios","create","baseURL","responseType","setAuthToken","token","state","auth","defaults","headers","common","Authorization","e"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AAGA,OAAO,MAAMC,KAAK,GAAGF,KAAK,CAACG,MAAN,CAAa;AAC9BC,EAAAA,OAAO,EAAE,uBADqB;AAE9BC,EAAAA,YAAY,EAAE;AAFgB,CAAb,CAAd;;AAKP,MAAMC,YAAY,GAAG,YAAY;AAC7B,QAAMC,KAAK,GAAGN,WAAW,CAAEO,KAAD,IAAkBA,KAAK,CAACC,IAAN,CAAWF,KAA9B,CAAzB;;AAEA,MAAI;AACA,QAAIA,KAAJ,EAAW;AACPL,MAAAA,KAAK,CAACQ,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD;AAC7CC,QAAAA,aAAa,EAAG,UAASN,KAAM;AADc,OAAjD;AAGH,KAJD,MAIO;AACH,aAAOL,KAAK,CAACQ,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACH;AACJ,GARD,CAQE,OAAME,CAAN,EAAS;AACP,UAAMA,CAAN;AACH;AACJ,CAdD;;AAgBAR,YAAY","sourcesContent":["import Axios from 'axios';\r\nimport { useSelector } from 'react-redux';\r\nimport { IAuth } from './store/action-interface';\r\n\r\nexport const axios = Axios.create({\r\n    baseURL: \"http://localhost:5000\",\r\n    responseType: \"json\"\r\n});\r\n\r\nconst setAuthToken = async () => {\r\n    const token = useSelector((state: IAuth) => state.auth.token);\r\n\r\n    try {\r\n        if (token) {\r\n            axios.defaults.headers.common['Authorization'] = {\r\n                Authorization: `Bearer ${token}`\r\n            };\r\n        } else {\r\n            delete axios.defaults.headers.common['Authorization'];\r\n        }\r\n    } catch(e) {\r\n        throw e;\r\n    }\r\n}\r\n\r\nsetAuthToken();\r\n"]},"metadata":{},"sourceType":"module"}