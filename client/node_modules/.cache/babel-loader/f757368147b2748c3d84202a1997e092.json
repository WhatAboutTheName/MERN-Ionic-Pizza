{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\\\\React\\\\Ionic-pizza\\\\client\\\\src\\\\pages\\\\add-product\\\\add-product.tsx\";\nimport { IonButton, IonContent, IonImg, IonInput, IonItem, IonLabel, IonTextarea } from '@ionic/react';\nimport React, { createRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { axios } from '../../axios';\nimport { Header } from '../../components/header';\nimport './add-product.css';\nexport const AddProduct = () => {\n  const history = useHistory();\n  const token = useSelector(state => state.auth.token);\n  const fileInputRef = createRef();\n  const [imagePreview, setImagePreview] = useState('');\n  const [product, setProduct] = useState({});\n\n  const setValue = event => {\n    const target = event.target;\n    setProduct({ ...product,\n      [target.name]: target.value\n    });\n  };\n\n  const filePicker = event => {\n    const file = event.target.files[0];\n    setProduct({ ...product,\n      image: file\n    });\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      setImagePreview(reader.result);\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  const uploadProduct = async () => {\n    try {\n      const data = new FormData();\n      data.append(\"title\", product.title);\n      data.append(\"price\", product.price);\n      data.append(\"image\", product.image, product.title);\n      await axios.post('/admin/create-pizza', data, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      history.push('/');\n    } catch (e) {}\n  };\n\n  const filePickerClick = () => {\n    fileInputRef.current.click();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    title: 'Add product',\n    key: 'AddProduct',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, \"Title:\"), /*#__PURE__*/React.createElement(IonInput, {\n    name: \"title\",\n    type: \"text\",\n    onIonChange: setValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(IonItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, \"Price:\"), /*#__PURE__*/React.createElement(IonInput, {\n    name: \"price\",\n    type: \"number\",\n    onIonChange: setValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(IonItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    color: \"warning\",\n    onClick: filePickerClick,\n    className: \"btnMaxWidth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, \"Change Image\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"image\",\n    type: \"file\",\n    ref: fileInputRef,\n    onChange: filePicker,\n    className: \"imagePicker\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(IonItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, imagePreview ? /*#__PURE__*/React.createElement(IonImg, {\n    src: imagePreview,\n    alt: product.title,\n    className: \"imagePreviw\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }) : /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 35\n    }\n  }, \"Please load image\"))), /*#__PURE__*/React.createElement(IonItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, \"Description:\"), /*#__PURE__*/React.createElement(IonTextarea, {\n    name: \"description\",\n    placeholder: \"Enter pizza description...\",\n    rows: 7,\n    onIonChange: setValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(IonButton, {\n    color: \"warning\",\n    onClick: uploadProduct,\n    className: \"btnMaxWidth btnBottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, \"Accept\")));\n};","map":{"version":3,"sources":["D:/проекты/React/Ionic-pizza/client/src/pages/add-product/add-product.tsx"],"names":["IonButton","IonContent","IonImg","IonInput","IonItem","IonLabel","IonTextarea","React","createRef","useState","useSelector","useHistory","axios","Header","AddProduct","history","token","state","auth","fileInputRef","imagePreview","setImagePreview","product","setProduct","setValue","event","target","name","value","filePicker","file","files","image","reader","FileReader","onload","result","readAsDataURL","uploadProduct","data","FormData","append","title","price","post","headers","Authorization","push","e","filePickerClick","current","click"],"mappings":"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","sourcesContent":["import {\r\n    IonButton,\r\n    IonContent,\r\n    IonImg,\r\n    IonInput,\r\n    IonItem,\r\n    IonLabel,\r\n    IonTextarea,\r\n} from '@ionic/react';\r\nimport React, { createRef, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { axios } from '../../axios';\r\nimport { Header } from '../../components/header';\r\nimport { IAuth } from '../../store/action-interface';\r\nimport './add-product.css';\r\n\r\ninterface IProduct {\r\n    title: string,\r\n    price: string,\r\n    image: any,\r\n    description: string\r\n}\r\n\r\nexport const AddProduct: React.FC = () => {\r\n\r\n    const history = useHistory();\r\n    const token = useSelector((state: IAuth) => state.auth.token);\r\n    const fileInputRef: React.RefObject<HTMLInputElement> = createRef();\r\n    const [imagePreview, setImagePreview] = useState('');\r\n    const [product, setProduct] = useState({} as IProduct);\r\n\r\n    const setValue = (event: Event) => {\r\n        const target = event.target as HTMLInputElement;\r\n        setProduct({\r\n            ...product,\r\n            [target.name]: target.value\r\n        });\r\n    }\r\n\r\n    const filePicker = (event: any) => {\r\n        const file = (event.target as HTMLInputElement).files[0];\r\n        setProduct({\r\n            ...product,\r\n            image: file\r\n        });\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n            setImagePreview(reader.result as string);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    const uploadProduct = async () => {\r\n        try {\r\n            const data = new FormData();\r\n            data.append(\"title\", product.title);\r\n            data.append(\"price\", product.price);\r\n            data.append(\"image\", product.image, product.title);\r\n            await axios.post('/admin/create-pizza', data, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n            history.push('/');\r\n        } catch (e) { }\r\n    }\r\n\r\n    const filePickerClick = () => {\r\n        (fileInputRef.current as HTMLElement).click();\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header\r\n                title={'Add product'}\r\n                key={'AddProduct'}\r\n            />\r\n            <IonContent>\r\n                <IonItem>\r\n                    <IonLabel>Title:</IonLabel>\r\n                    <IonInput name=\"title\" type=\"text\" onIonChange={setValue} />\r\n                </IonItem>\r\n                <IonItem>\r\n                    <IonLabel>Price:</IonLabel>\r\n                    <IonInput name=\"price\" type=\"number\" onIonChange={setValue} />\r\n                </IonItem>\r\n                <IonItem>\r\n                    <IonButton\r\n                        color=\"warning\"\r\n                        onClick={filePickerClick}\r\n                        className=\"btnMaxWidth\"\r\n                    >\r\n                        Change Image\r\n                    </IonButton>\r\n                    <input\r\n                        name=\"image\"\r\n                        type=\"file\"\r\n                        ref={fileInputRef}\r\n                        onChange={filePicker}\r\n                        className=\"imagePicker\"\r\n                    />\r\n                </IonItem>\r\n                <IonItem>\r\n                    <div className=\"imageContainer\">\r\n                        {\r\n                            imagePreview ?\r\n                                <IonImg src={imagePreview} alt={product.title} className=\"imagePreviw\" />\r\n                                : <h4>Please load image</h4>\r\n                        }\r\n                    </div>\r\n                </IonItem>\r\n                <IonItem>\r\n                    <IonLabel>Description:</IonLabel>\r\n                    <IonTextarea\r\n                        name=\"description\"\r\n                        placeholder=\"Enter pizza description...\"\r\n                        rows={7}\r\n                        onIonChange={setValue}\r\n                    />\r\n                </IonItem>\r\n                <IonButton\r\n                    color=\"warning\"\r\n                    onClick={uploadProduct}\r\n                    className=\"btnMaxWidth btnBottom\"\r\n                >\r\n                    Accept\r\n                </IonButton>\r\n            </IonContent>\r\n        </>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}