{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\\\\React\\\\Ionic-pizza\\\\client\\\\src\\\\pages\\\\log-in\\\\log-in.tsx\";\nimport { IonButton, IonContent, IonInput, IonItem, IonLabel } from '@ionic/react';\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router';\nimport { Header } from '../../components/header';\nimport { axios } from '../../axios';\nimport { useDispatch } from 'react-redux';\nimport { isAdmin, isLogin, userExpiresIn, userId, userToken } from '../../store/actions/auth-actions';\nexport const LogIn = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [authData, setAuthData] = useState({\n    email: '',\n    password: ''\n  });\n\n  const setValue = event => {\n    const target = event.target;\n    setAuthData({ ...authData,\n      [target.name]: target.value\n    });\n  };\n\n  const identification = async () => {\n    try {\n      const res = await axios.post('/auth/login', authData);\n      console.log(res);\n      await dispatch(isAdmin(res.data.admin));\n      await dispatch(isLogin(res.data.isLogin));\n      await dispatch(userToken(res.data.token));\n      await dispatch(userExpiresIn(res.data.expiresIn));\n      await dispatch(userId(res.data.userId));\n      history.push('/');\n    } catch (e) {}\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    title: 'LogIn',\n    key: 'LogIn',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 21\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(IonInput, {\n    name: \"email\",\n    type: \"email\",\n    onIonChange: setValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(IonItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 21\n    }\n  }, \"Password:\"), /*#__PURE__*/React.createElement(IonInput, {\n    name: \"password\",\n    type: \"password\",\n    onIonChange: setValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(IonButton, {\n    color: \"warning\",\n    onClick: identification,\n    className: \"btnMaxWidth btnBottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \"Accept\")));\n};","map":{"version":3,"sources":["D:/проекты/React/Ionic-pizza/client/src/pages/log-in/log-in.tsx"],"names":["IonButton","IonContent","IonInput","IonItem","IonLabel","React","useState","useHistory","Header","axios","useDispatch","isAdmin","isLogin","userExpiresIn","userId","userToken","LogIn","dispatch","history","authData","setAuthData","email","password","setValue","event","target","name","value","identification","res","post","console","log","data","admin","token","expiresIn","push","e"],"mappings":"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","sourcesContent":["import { IonButton, IonContent, IonInput, IonItem, IonLabel } from '@ionic/react';\r\nimport React, { useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { Header } from '../../components/header';\r\nimport { axios } from '../../axios';\r\nimport { useDispatch } from 'react-redux';\r\nimport { isAdmin, isLogin, userExpiresIn, userId, userToken } from '../../store/actions/auth-actions';\r\n\r\nexport const LogIn = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const [authData, setAuthData] = useState({\r\n        email: '',\r\n        password: ''\r\n    });\r\n\r\n    const setValue = (event: Event) => {\r\n        const target = event.target as HTMLInputElement;\r\n        setAuthData({\r\n            ...authData,\r\n            [target.name]: target.value\r\n        });\r\n    }\r\n    \r\n    const identification = async () => {\r\n        try {\r\n            const res = await axios.post('/auth/login', authData);\r\n            console.log(res);\r\n            await dispatch( isAdmin(res.data.admin) );\r\n            await dispatch( isLogin(res.data.isLogin) );\r\n            await dispatch( userToken(res.data.token) );\r\n            await dispatch( userExpiresIn(res.data.expiresIn) );\r\n            await dispatch( userId(res.data.userId) );\r\n            history.push('/');\r\n        } catch(e) { }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header\r\n                title={'LogIn'}\r\n                key={'LogIn'}\r\n            />\r\n            <IonContent>\r\n                <IonItem>\r\n                    <IonLabel>Email:</IonLabel>\r\n                    <IonInput name=\"email\" type=\"email\" onIonChange={setValue} />\r\n                </IonItem>\r\n                <IonItem>\r\n                    <IonLabel>Password:</IonLabel>\r\n                    <IonInput name=\"password\" type=\"password\" onIonChange={setValue} />\r\n                </IonItem>\r\n                <IonButton\r\n                    color=\"warning\"\r\n                    onClick={identification}\r\n                    className=\"btnMaxWidth btnBottom\"\r\n                >\r\n                    Accept\r\n                </IonButton>\r\n            </IonContent>\r\n        </>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}